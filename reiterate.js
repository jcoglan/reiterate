Function.from=function(a){if(typeof a=='function')return a;if(a.toFunction)return a.toFunction();if(typeof a=='object')return $H(a).toFunction();return Prototype.K};Function.OPERATORS={'+':function(x){return this+x},'-':function(x){return this-x},'*':function(x){return this*x},'/':function(x){return this/x},'%':function(x){return this%x},'<':function(x){return this<x},'<=':function(x){return this<=x},'>':function(x){return this>x},'>=':function(x){return this>=x},'==':function(x){return Object.toValue(this,this.constructor)==x},'!=':function(x){return Object.toValue(this,this.constructor)!=x},'===':function(x){return Object.toValue(this,this.constructor)===x},'!==':function(x){return Object.toValue(this,this.constructor)!==x},'&&':function(x){return Object.toValue(this,this.constructor)&&x},'&':function(x){return this&x},'||':function(x){return Object.toValue(this,this.constructor)||x},'|':function(x){return this|x},'typeof':function(x){return typeof Object.toValue(this,this.constructor)==x},'instanceof':function(x){return this instanceof x}};Object.toValue=function(x,a){if(typeof x=='undefined'||!a)return undefined;if(a==Boolean)return x==true;if([Object,Function,Array].include(a))return x;return a.call(this,x)};String.prototype.toFunction=function(){var b=this.split('.');if(!b[0])return Prototype.K;return function(o){var a,member=o,key;for(var i=0,n=b.length;i<n;i++){key=b[i];a=member;member=a[key];if(typeof member=='function')member=member.apply(a)}return member}};Array.prototype.toFunction=function(){var b=this[0],args=this.slice(1),op;if(!b)return Prototype.K;if(op=Function.OPERATORS[b])b=op;return function(o){var a=(typeof b=='function')?b:o[b];return(typeof a=='function')?a.apply(o,args):undefined}};Hash.prototype.toFunction=function(){var b=this._object||this,keys=this.keys();if(keys.length===0)return Prototype.K;return function(o){var a=true,key,fn,args,op;for(var i=0,n=keys.length;i<n;i++){key=keys[i];fn=o[key];args=b[key];if(op=Function.OPERATORS[key])fn=op;if(typeof fn=='function'&&!(args instanceof Array))args=[args];a=a&&((typeof fn=='function')?fn.apply(o,args):fn==args)}return a}};[Enumerable,Array.prototype,Hash.prototype,ObjectRange.prototype,Ajax.Responders,Element.ClassNames.prototype].each(function(d){$w('all any collect detect findAll max min partition reject sortBy map find select filter every some').each(function(b){if(!d[b]){return}var c=d[b];d[b]=function(){var a=$A(arguments);if(a[0])a[0]=Function.from(a[0]);return c.apply(this,a)}});d.count=function(a,b){return this.findAll(a,b).length}});